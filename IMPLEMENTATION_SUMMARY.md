# –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ó–∞–≤–µ—Ä—à–µ–Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö

#### SubscriptionsService
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- ‚úÖ –†–∞—Å—á–µ—Ç —Ü–µ–Ω –ø–æ–¥–ø–∏—Å–æ–∫ (Basic, Pro, Premium)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–∏—Å–ª–µ–Ω–∏–π –≤ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (5% –¥–ª—è Pro, 10% –¥–ª—è Premium)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ (pause/resume/cancel)

#### ZakatService
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∑–∞–∫—è—Ç–∞ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –¥–ª—è –≤—ã–ø–ª–∞—Ç—ã –∑–∞–∫—è—Ç–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### CampaignsService
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è –≤ –∫–∞–º–ø–∞–Ω–∏–∏ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–∏

#### PaymentsService
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ webhooks –æ—Ç YooKassa –∏ CloudPayments
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ –∫–∞–º–ø–∞–Ω–∏–π
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–∏—Å–ª–µ–Ω–∏–π –æ—Ç –ø–æ–¥–ø–∏—Å–æ–∫
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 2. –°–æ–∑–¥–∞–Ω—ã —Ñ–æ—Ä–º—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

#### DonationForm
- ‚úÖ –§–æ—Ä–º–∞ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è —Å –≤—ã–±–æ—Ä–æ–º —Å—É–º–º—ã
- ‚úÖ –ü—Ä–µ—Å–µ—Ç—ã —Å—É–º–º (100, 250, 500, 1000 ‚ÇΩ)
- ‚úÖ –í–≤–æ–¥ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π —Å—É–º–º—ã
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ react-hook-form
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API

#### SubscriptionForm
- ‚úÖ –§–æ—Ä–º–∞ –≤—ã–±–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–∞ (Basic, Pro, Premium)
- ‚úÖ –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–¥–ø–∏—Å–∫–∏ (1, 3, 6, 12 –º–µ—Å—è—Ü–µ–≤)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–Ω –∏ —Å–∫–∏–¥–æ–∫
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API

#### ZakatPage
- ‚úÖ –§–æ—Ä–º–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –∑–∞–∫—è—Ç–∞ —Å –ø–æ–ª—è–º–∏ –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –≤—ã–ø–ª–∞—Ç—ã –∑–∞–∫—è—Ç–∞ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ø–ª–∞—Ç–µ–∂–µ–π

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

#### YooKassa
- ‚úÖ –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è webhooks

#### CloudPayments
- ‚úÖ –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è webhooks

#### PaymentProvider
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø–æ BIN –∫–∞—Ä—Ç—ã
- ‚úÖ BIN –¥–µ—Ç–µ–∫—Ç–æ—Ä –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã –∫–∞—Ä—Ç—ã
- ‚úÖ Fallback –ª–æ–≥–∏–∫–∞ (RUB ‚Üí YooKassa, –¥—Ä—É–≥–∏–µ ‚Üí CloudPayments)

### 4. Telegram Bot –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### TelegramBot –∫–ª–∞—Å—Å
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ (/start, /sadaqa, /support, /zakat, /subscribe)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ callback_query (–Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫–∏)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± —É—Å–ø–µ—à–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö
- ‚úÖ Inline-–∫–Ω–æ–ø–∫–∏ —Å WebApp —Å—Å—ã–ª–∫–∞–º–∏
- ‚úÖ Webhook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è—Ö
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

### 5. Elasticsearch –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### ElasticsearchService
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è —Ñ–æ–Ω–¥–æ–≤
- ‚úÖ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ñ–æ–Ω–¥–æ–≤
- ‚úÖ –ü–æ–∏—Å–∫ —Ñ–æ–Ω–¥–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (—Å—Ç—Ä–∞–Ω–∞, —Ü–µ–ª—å, –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
- ‚úÖ –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏—é
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å PostgreSQL

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ Fallback –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –µ—Å–ª–∏ Elasticsearch –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### Backend
```
backend/src/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ donations.ts ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ subscriptions.ts ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ zakat.ts ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ campaigns.ts ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ payments.ts ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ integrations/
‚îÇ   ‚îú‚îÄ‚îÄ payments/ ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ yookassa.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cloudpayments.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ binDetector.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ paymentProvider.ts
‚îÇ   ‚îú‚îÄ‚îÄ telegram/ ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bot.ts
‚îÇ   ‚îî‚îÄ‚îÄ elasticsearch/ ‚úÖ
‚îÇ       ‚îî‚îÄ‚îÄ index.ts
‚îî‚îÄ‚îÄ routes/
    ‚îî‚îÄ‚îÄ telegram.ts ‚úÖ
```

### Frontend
```
frontend/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ DonationForm.tsx ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ DonationForm.css ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ SubscriptionForm.tsx ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ SubscriptionForm.css ‚úÖ
‚îî‚îÄ‚îÄ pages/
    ‚îú‚îÄ‚îÄ DonatePage.tsx ‚úÖ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç DonationForm)
    ‚îú‚îÄ‚îÄ SubscriptionPage.tsx ‚úÖ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç SubscriptionForm)
    ‚îî‚îÄ‚îÄ ZakatPage.tsx ‚úÖ (—Ñ–æ—Ä–º–∞ —Å API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π)
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (backend/.env)
```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_WEBAPP_SECRET=your_webapp_secret

# Payments
YOOKASSA_SHOP_ID=your_shop_id
YOOKASSA_SECRET_KEY=your_secret_key
CLOUDPAYMENTS_PUBLIC_ID=your_public_id
CLOUDPAYMENTS_SECRET_KEY=your_secret_key

# Elasticsearch
ELASTICSEARCH_URL=http://localhost:9200
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Webhook
```bash
# –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ backend
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
  -d "url=https://your-domain.com/api/v1/telegram/webhook"
```

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
   - Integration —Ç–µ—Å—Ç—ã –¥–ª—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
   - E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

2. **–î–æ—Ä–∞–±–æ—Ç–∫–∞**
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –≤–∞–ª–∏–¥–∞—Ü–∏–π
   - –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
   - –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ç—Ä–∞–∏ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –î–æ–±–∞–≤–∏—Ç—å Sentry –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
   - –ú–µ—Ç—Ä–∏–∫–∏ Prometheus
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

## üéØ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
- ‚úÖ –ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏ —Å –æ—Ç—á–∏—Å–ª–µ–Ω–∏—è–º–∏
- ‚úÖ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞–∫—è—Ç–∞
- ‚úÖ Telegram Bot –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ Elasticsearch –ø–æ–∏—Å–∫
- ‚úÖ –§–æ—Ä–º—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

