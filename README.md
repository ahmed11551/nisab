# Nisab - –°–∞–¥–∞–∫–∞ –ü–∞—Å—Å

Telegram Mini App –¥–ª—è –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π (—Å–∞–¥–∞–∫–∞), —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ (—Å–∞–¥–∞–∫–∞-–¥–∂–∞—Ä–∏—è), –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –∑–∞–∫—è—Ç–∞ –∏ —Ü–µ–ª–µ–≤—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- **–ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è**: –ï–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ —Ü–µ–ª—è–º (–º–µ—á–µ—Ç—å, —Å–∏—Ä–æ—Ç—ã, –ø—Ä–æ–µ–∫—Ç—ã)
- **–ü–æ–¥–ø–∏—Å–∫–∏**: –†–µ–≥—É–ª—è—Ä–Ω–∞—è –º–∏–ª–æ—Å—Ç—ã–Ω—è (—Å–∞–¥–∞–∫–∞-–¥–∂–∞—Ä–∏—è) —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ—Ç—á–∏—Å–ª–µ–Ω–∏—è–º–∏
- **–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞–∫—è—Ç–∞**: –†–∞—Å—á—ë—Ç –∏ –≤—ã–ø–ª–∞—Ç–∞ –∑–∞–∫—è—Ç–∞
- **–¶–µ–ª–µ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏**: –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É—á–∞—Å—Ç–∏–µ –≤ –∫—Ä–∞—É–¥—Ñ–∞–Ω–¥–∏–Ω–≥–æ–≤—ã—Ö –∫–∞–º–ø–∞–Ω–∏—è—Ö
- **–§–æ–Ω–¥—ã-–ø–∞—Ä—Ç–Ω—ë—Ä—ã**: –ö–∞—Ç–∞–ª–æ–≥ —Ñ–æ–Ω–¥–æ–≤ –∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
nisab/
‚îú‚îÄ‚îÄ frontend/          # Telegram Mini App (React/TypeScript)
‚îú‚îÄ‚îÄ backend/           # API Server (Node.js/TypeScript)
‚îú‚îÄ‚îÄ shared/            # –û–±—â–∏–µ —Ç–∏–ø—ã –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ docs/              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 18.0.0
- npm >= 9.0.0
- PostgreSQL >= 14
- Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)
- Elasticsearch (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ñ–æ–Ω–¥–æ–≤)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd nisab
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm run install:all
```

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã .env
cp backend/.env.example backend/.env
cp frontend/.env.example frontend/.env
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (Docker):
```bash
docker-compose up -d postgres redis elasticsearch
```

5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `backend/.env`:
- `DATABASE_URL` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç–µ —á–µ—Ä–µ–∑ @BotFather)
- `TELEGRAM_WEBAPP_SECRET` - —Å–µ–∫—Ä–µ—Ç –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ WebApp
- `YOOKASSA_SHOP_ID` –∏ `YOOKASSA_SECRET_KEY` - –∫–ª—é—á–∏ YooKassa
- `CLOUDPAYMENTS_PUBLIC_ID` –∏ `CLOUDPAYMENTS_SECRET_KEY` - –∫–ª—é—á–∏ CloudPayments
- `ELASTICSEARCH_URL` - URL Elasticsearch (http://localhost:9200)
- `API_TOKEN` - —Ç–æ–∫–µ–Ω –¥–ª—è bot.e-replika.ru (test_token_123)

6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
cd backend
npm run migrate
npm run seed  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```

7. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
npm run dev
```

8. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:
- Backend: http://localhost:3000/health
- Frontend: http://localhost:5173

**üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –°–º. [SETUP_GUIDE.md](./SETUP_GUIDE.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### Frontend (`/frontend`)

Telegram Mini App –Ω–∞ React + TypeScript —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Telegram WebApp SDK.

- `src/pages/` - —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `src/components/` - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `src/services/` - API –∫–ª–∏–µ–Ω—Ç—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `src/store/` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (Zustand)
- `src/utils/` - —É—Ç–∏–ª–∏—Ç—ã

### Backend (`/backend`)

REST API –Ω–∞ Node.js + Express + TypeScript.

- `src/routes/` - –º–∞—Ä—à—Ä—É—Ç—ã API
- `src/controllers/` - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
- `src/services/` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- `src/models/` - –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `src/middleware/` - –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û
- `src/integrations/` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

## üîå API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

–û—Å–Ω–æ–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

- `/api/v1/donations/*` - –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è
- `/api/v1/subscriptions/*` - –ø–æ–¥–ø–∏—Å–∫–∏
- `/api/v1/zakat/*` - –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞–∫—è—Ç–∞
- `/api/v1/campaigns/*` - —Ü–µ–ª–µ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
- `/api/v1/partners/*` - —Ñ–æ–Ω–¥—ã-–ø–∞—Ä—Ç–Ω—ë—Ä—ã
- `/api/v1/funds/*` - —Ñ–æ–Ω–¥—ã
- `/api/v1/me/*` - –ø—Ä–æ—Ñ–∏–ª—å –∏ –∏—Å—Ç–æ—Ä–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: [docs/API.md](./docs/API.md)

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í–∞–ª–∏–¥–∞—Ü–∏—è Telegram WebApp initData
- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü–æ–¥–ø–∏—Å–∏ webhooks –æ—Ç –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- Rate limiting
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üì¶ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

- **GitHub:** –°–º. [GIT_INSTRUCTIONS.md](./GIT_INSTRUCTIONS.md) –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ GitHub
- **Vercel:** –°–º. [DEPLOY_VERCEL.md](./DEPLOY_VERCEL.md) –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Vercel
- **–î–µ—Ç–∞–ª—å–Ω–æ:** –°–º. [GITHUB_SETUP.md](./GITHUB_SETUP.md) –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- **–ß–µ–∫–ª–∏—Å—Ç:** –°–º. [DEPLOYMENT_CHECKLIST.md](./DEPLOYMENT_CHECKLIST.md)
- **–ë—ã—Å—Ç—Ä–æ:** –°–º. [README_DEPLOY.md](./README_DEPLOY.md)

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–∞—è

## üë• –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

